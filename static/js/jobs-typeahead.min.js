var engine=new Bloodhound({queryTokenizer:Bloodhound.tokenizers.whitespace,datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},remote:{url:JOBS_TYPEAHEAD_URL+"?search=%query",transform:function(e){return e.results},wildcard:"%query"}}),$tf=$("#id_jobs").tokenfield({typeahead:[null,{name:"available-jobs",source:engine.ttAdapter(),displayKey:"name",templates:{notFound:"<div>Not Found</div>",pending:"<div>Loading...</div>",suggestion:function(e){return'<div data-job-id="'+e.id+'">'+e.name+"</div>"}}}]});$("#id_jobs-tokenfield").on("typeahead:selected",function(e,n){$tf.tokenfield("createToken",n.name)});